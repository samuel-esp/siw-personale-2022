<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Colorlib Templates">
    <meta name="author" content="Colorlib">
    <meta name="keywords" content="Colorlib Templates">


    <title>Modifica Evento</title>


    <link th:href="@{/assets/img/block.png}" rel="icon">
    <link th:href="@{/assets/vendorForm/mdi-font/css/material-design-iconic-font.min.css}" rel="stylesheet" media="all">
    <link th:href="@{/assets/vendorForm/font-awesome-4.7/css/font-awesome.min.css}" rel="stylesheet" media="all">


    <link th:href="@{https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i}" rel="stylesheet">


    <link th:href="@{/assets/vendorForm/select2/select2.min.css}" rel="stylesheet" media="all">
    <link th:href="@{/assets/vendorForm/datepicker/daterangepicker.css}" rel="stylesheet" media="all">


    <link th:href="@{/assets/css/form.css}" rel="stylesheet" media="all">
</head>

<body>
<div class="error" role="alert" th:text="${error}" th:if="${error}"></div>
<div class="topnav">
    <a href="/admin/artistaForm">Aggiungi Artista</a>
    <a href="/admin/cittaForm">Aggiungi Citta</a>
    <a href="/admin/stadioForm">Aggiungi Stadio</a>
    <a href="/admin/eventoForm">Aggiungi Evento</a>
    <a class="active" href="/admin/eventi">Modifca Eventi</a>
    <a href="/logout">Logout</a>
</div>

    <div class="page-wrapper bg-gra-02 p-t-130 p-b-100 font-poppins">
        <div class="wrapper wrapper--w680">
            <div class="card card-4">
                <div class="card-body">
                    <h2 class="title">Modifica Evento</h2>
                    <form id="form" action="#" th:action="@{/admin/editEvento/} + ${evento.id}" th:object="${evento}" method="post">
                        <div class="row row-space">
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">Data Svolgimento</label>
                                    <div class="input-group-icon">
                                        <input class="input--style-4 js-datepicker" type="date" name="data" th:attr="min=${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}" th:field="*{data}" required>
                                    </div>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="input-group">
                                    <label class="label">Prezzo</label>
                                    <input class="input--style-4" type="number" min="0" name="prezzo" th:field="*{prezzoInt}" required>
                                </div>
                            </div>
                        </div>
                        <div class="p-t-15">
                            <button class="btn btn--radius-2 btn--blue" type="submit">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <script th:src="@{/assets/vendorForm/jquery/jquery.min.js}"></script>

    <script th:src="@{/assets/vendorForm/select2/select2.min.js}"></script>
    <script th:src="@{/static/assets/vendorForm/datepicker/moment.min.js}"></script>
    <script th:src="@{/static/assets/vendorForm/datepicker/daterangepicker.js}"></script>


    <script th:src="@{/assets/js/global.js}"></script>

</body>

<script>$("select").on("click" , function() {

    $(this).parent(".select-box").toggleClass("open");

});

$(document).mouseup(function (e)
{
    var container = $(".select-box");

    if (container.has(e.target).length === 0)
    {
        container.removeClass("open");
    }
});


$("select").on("change" , function() {

    var selection = $(this).find("option:selected").text(),
        labelFor = $(this).attr("id"),
        label = $("[for='" + labelFor + "']");

    label.find(".label-desc").html(selection);

});
</script>
<script>
    $('form').submit(function(e) {
    var bk1 = document.getElementById("select-box4").value;
    var bk2 = document.getElementById("select-box5").value;
    var bk3 = document.getElementById("select-box6").value;
    var bk4 = document.getElementById("select-box7").value;
    var bk5 = document.getElementById("select-box8").value;
    var bk6 = document.getElementById("select-box9").value;

    var test = [bk1, bk2, bk3, bk4, bk5, bk6];
    var res = true;
    for(var i = 0; i < test.length; i++) {
        if (test.indexOf(test[i], i + 1) >= 0) {
            res = false;
            break;
        }
    }

    if(res){
        document.block_form.submit();
    }else{
        alert("Per uno stesso catering non possono esserci due primi uguali, due secondi uguali o due dolci uguali! Correggi prima di continuare");
        e.preventDefault();
        document.getElementById("block_error").value = "Multiple blocks have same selected option";
    }});
</script>
</html>